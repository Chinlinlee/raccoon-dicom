# Changelog

All notable changes to this project will be documented in this file. See [standard-version](https://github.com/conventional-changelog/standard-version) for commit guidelines.

## [1.5.0](https://github.com/Chinlinlee/raccoon-dicom/compare/v1.4.0...v1.5.0) (2024-01-24)


### Features

* [#13](https://github.com/Chinlinlee/raccoon-dicom/issues/13) ([b837646](https://github.com/Chinlinlee/raccoon-dicom/commit/b8376468bc4b03322292c98c849e80641d89a060))
* add `findOneByDicomUID` for study/series/instance models and use for delete ([feb1ed1](https://github.com/Chinlinlee/raccoon-dicom/commit/feb1ed160421d90865f47a43d29966ddd0a0c227))
* add `findOneByPatientID` to wrap mongoose `findOne` method ([a731375](https://github.com/Chinlinlee/raccoon-dicom/commit/a731375d7e9e183184cb8b46de8f0f8d3d9f2bb8))
* add `getValue` and `getValues` in base dicom json ([8fda280](https://github.com/Chinlinlee/raccoon-dicom/commit/8fda28038508ef98e8e9a0afec297dc2b73a5336))
* add `Human Performer's Name` for UPS model ([2810f96](https://github.com/Chinlinlee/raccoon-dicom/commit/2810f96cf148578c77dc7746167f1ac743454ce2))
* add `Institution Code (00080082)` association ([57ecdb8](https://github.com/Chinlinlee/raccoon-dicom/commit/57ecdb814c86453088a9e8ff0d1682bbec915e0d))
* add `QueryUpsDicomJsonFactory` and using in `geWorkItemService` ([ee2ec31](https://github.com/Chinlinlee/raccoon-dicom/commit/ee2ec31938dd1a6f7f4a95cd81013d61029dff7c))
* add `updateStatusByQuery` for `MwlItemModel` instead findAll ([db9e488](https://github.com/Chinlinlee/raccoon-dicom/commit/db9e488ac07f9eaad02a34ea729e57974d60dc0f))
* add columns for attributes in issuer of Admission ID Sequence ([e71a032](https://github.com/Chinlinlee/raccoon-dicom/commit/e71a032bc5a517aaa09f86299558cc181669bdb6))
* add constructor for injecting CFindSCP without qr levels ([ec8e658](https://github.com/Chinlinlee/raccoon-dicom/commit/ec8e658c113d766ba696e91735b7f9ffb755d8bc))
* add dicom convert to fhir API ([8d9adb3](https://github.com/Chinlinlee/raccoon-dicom/commit/8d9adb35c9bb9c4dd1efafc5fb2a61918a7dbae7))
* add DT transform value for sql ([c517f41](https://github.com/Chinlinlee/raccoon-dicom/commit/c517f41321dae0d78a18dd4e0048fafa65dfd4e4))
* add first version of creating work item service ([ed58e54](https://github.com/Chinlinlee/raccoon-dicom/commit/ed58e5484e3abcefc8b050505e2283ef15953642))
* add fns to get tag, keyword and vr of dicom json ([61a391c](https://github.com/Chinlinlee/raccoon-dicom/commit/61a391c5fc3bf1e724bdab5d5daf8953c86d9cde))
* add Modality Worklist query support for C-FIND ([4965b62](https://github.com/Chinlinlee/raccoon-dicom/commit/4965b6260ef76c59c5fcefe1e8a24ac1f8498040))
* add module alias for mongodb ([031f72b](https://github.com/Chinlinlee/raccoon-dicom/commit/031f72b7c6073970840be8cc69e96586591e369c))
* add pagination in study getDicomJson ([1ba1706](https://github.com/Chinlinlee/raccoon-dicom/commit/1ba1706951a7fa83fc2d9b3d33979b4faede300c))
* add series many to many person name model ([b454036](https://github.com/Chinlinlee/raccoon-dicom/commit/b454036fd705c96cad94052aaa7accf308f4ee44))
* add store dest in models of each level ([e07cd58](https://github.com/Chinlinlee/raccoon-dicom/commit/e07cd58cab3137e5db8922b2ad77023340a526b9))
* add string json array query ([6a2fbf7](https://github.com/Chinlinlee/raccoon-dicom/commit/6a2fbf70b924f85a4cf857d02f4f96fd9d8c685c))
* add time query ([72566ca](https://github.com/Chinlinlee/raccoon-dicom/commit/72566caa4c3fedc230965304d1026f662eb613d6))
* add ups global subscription model ([717fc17](https://github.com/Chinlinlee/raccoon-dicom/commit/717fc17729ed4a3fbdb80eba66d6bc1fa8fa344a))
* add UPS work item model ([83f5dd8](https://github.com/Chinlinlee/raccoon-dicom/commit/83f5dd8c6f70e728e4a5dd5ef6c95e2f523def6a))
* **api:** move set patient into data adjust in create ups ([b00b525](https://github.com/Chinlinlee/raccoon-dicom/commit/b00b525364bee9688bc8f0fd01848431ab050a9d))
* **audit:** Add audit logger implementation ([8930b0c](https://github.com/Chinlinlee/raccoon-dicom/commit/8930b0c24f09d262a7e5b646675b8583bc354413))
* C MOVE DIMSE Service ([3468469](https://github.com/Chinlinlee/raccoon-dicom/commit/346846950a6f1bf64b3d1ee800ecf175420680c1))
* change `getModalitiesInStudy` query way ([c185a7f](https://github.com/Chinlinlee/raccoon-dicom/commit/c185a7f30bf70fd32780bac4411fb953433ce1dd))
* change all string type length to 255 for each vr ([80fb3b8](https://github.com/Chinlinlee/raccoon-dicom/commit/80fb3b8ccc8c74a30688dd524b15cfaac1e61389))
* change update logic for creating mwl item ([76a047a](https://github.com/Chinlinlee/raccoon-dicom/commit/76a047a43fa56783034407eba04e0f9de6cde146))
* complete series query builder ([4740615](https://github.com/Chinlinlee/raccoon-dicom/commit/4740615674a2e4633d115faec628e55edef5d1d8))
* create or update x0040A073 when store ([d2f1ccc](https://github.com/Chinlinlee/raccoon-dicom/commit/d2f1ccc6c2e9eaaf0a0cbd4ea675b4a505dbd35e))
* delete DICOM of hierarchy levels APIs ([66ba0e2](https://github.com/Chinlinlee/raccoon-dicom/commit/66ba0e2f4ebf37d0168447fc6cd95ae29381e6c7))
* delete expired (deleteStatus) patients and associated records ([46563d3](https://github.com/Chinlinlee/raccoon-dicom/commit/46563d369db4528a78939dbebb0968d39212f1ce))
* extract 00400275 to schema (avoid json) ([9b44292](https://github.com/Chinlinlee/raccoon-dicom/commit/9b44292cd56d9288f30bd2f7c2ea08dee53717c5))
* extract 0040A043, 0040A730 to single schema ([44b558e](https://github.com/Chinlinlee/raccoon-dicom/commit/44b558efbfb16a6671583ea01025f2e56e68f4a6))
* extract x0040A073 to single schema ([54bac25](https://github.com/Chinlinlee/raccoon-dicom/commit/54bac253b58a4f758d054a6b216f5837b2540a18))
* implement count API for MWL item ([188b10d](https://github.com/Chinlinlee/raccoon-dicom/commit/188b10dd0e488d31493b482e440224ef54761fd1))
* implement trigger update work item event ([583dbcf](https://github.com/Chinlinlee/raccoon-dicom/commit/583dbcf23ac261952dacc8d03b8f13018ea15a52))
* implement update workitem API ([de32f10](https://github.com/Chinlinlee/raccoon-dicom/commit/de32f10c5f41ae8e1247a7ad49b7c8e2d66e16af))
* Implement UPS query for getting work items ([13dcd24](https://github.com/Chinlinlee/raccoon-dicom/commit/13dcd246e1c9ac9ca8b75464ef6ae645964fe182))
* instance model, and store instance ([19dce9e](https://github.com/Chinlinlee/raccoon-dicom/commit/19dce9ec0427a58be858a5359b73c6e7f0042873))
* instance query builder ([bbfe1d8](https://github.com/Chinlinlee/raccoon-dicom/commit/bbfe1d898c8077e9c32fa60fc7ddc8c48bf9f6e9))
* **mongo-mwl:** implement first version of create MWL item ([bfb6312](https://github.com/Chinlinlee/raccoon-dicom/commit/bfb631272e54eaa2f12d41950434b141122edba7))
* **mongodb:** generate PatientID from server for create patient API ([565fc7f](https://github.com/Chinlinlee/raccoon-dicom/commit/565fc7f43b1cdd10720d057585da2ff2351fa36c))
* **mongodb:** implement API `update, create patient by patient ID` for PAM-RS ([c5c1a08](https://github.com/Chinlinlee/raccoon-dicom/commit/c5c1a083a4dbe36867cce991557a850a79750057))
* **mongodb:** implement change filtered mwl items' status ([2e9a48d](https://github.com/Chinlinlee/raccoon-dicom/commit/2e9a48d5fb9f2fd09fef65f5d0cfa49cc47448d3))
* **mongodb:** implement change status of mwl item ([302b2bd](https://github.com/Chinlinlee/raccoon-dicom/commit/302b2bda8e0cd8ec8435267ebb2d5a56846068f8))
* **mongodb:** implement count MWL items ([a19caa7](https://github.com/Chinlinlee/raccoon-dicom/commit/a19caa7f5cbe08084695db3d5f22274d9980e025))
* **mongodb:** implement create patient of PAM-RS ([1f63757](https://github.com/Chinlinlee/raccoon-dicom/commit/1f6375792e0a4e1369fcae6bd175ff21d3efda43))
* **mongodb:** implement delete patient API ([0f8c39d](https://github.com/Chinlinlee/raccoon-dicom/commit/0f8c39d93b52894ae7672713bd2442816234bf99))
* **mongodb:** implement MWL delete API ([4c2c0bf](https://github.com/Chinlinlee/raccoon-dicom/commit/4c2c0bf115da67ff374ebaf3b3c0880c573cfabd))
* **mongodb:** implement search for WML items API ([926de76](https://github.com/Chinlinlee/raccoon-dicom/commit/926de76c12c3cdb54ddfc70cd0c444e949a31ec4))
* **mongo:** use countDocuments instead of count ([47769a3](https://github.com/Chinlinlee/raccoon-dicom/commit/47769a3d2481fb1be4e7a51a8caf3a7f302cc651))
* only add events when `hitSubscriptions` greater equal than 1 ([c212fd0](https://github.com/Chinlinlee/raccoon-dicom/commit/c212fd0256be626e77733ac1ac86fb05949b57ec))
* patient query builder ([c7701f7](https://github.com/Chinlinlee/raccoon-dicom/commit/c7701f7620b69064f01e07cb784aae4ebf4b9cf8))
* **pg:** create db when not exists ([dda14ad](https://github.com/Chinlinlee/raccoon-dicom/commit/dda14adfe675f8f768c025a3e8f4b2f6cbc26f30))
* postgres use jsonb, otherwise json ([a893d1d](https://github.com/Chinlinlee/raccoon-dicom/commit/a893d1d9490719ca578235c534e3850171ef529e))
* query all series API ([4da907d](https://github.com/Chinlinlee/raccoon-dicom/commit/4da907d532de8a870773ec41a827e8743721e341))
* query builder add uid query when params present ([76e02e0](https://github.com/Chinlinlee/raccoon-dicom/commit/76e02e08ecad430c89b53d3ba438c57da2640827))
* query image that in recycling status (delete status 1) ([1c7bf4a](https://github.com/Chinlinlee/raccoon-dicom/commit/1c7bf4acaeec79400705fc6cd8d1b653fa18329b))
* query instance route ([33bb29d](https://github.com/Chinlinlee/raccoon-dicom/commit/33bb29d68270f39de8a0b3557accacd1dc19ef4d))
* remove cast column to jsonb ([70153a2](https://github.com/Chinlinlee/raccoon-dicom/commit/70153a275373d66412d603856a1f2a82c8c494ae))
* Retrieve Bulkdata Resources APIs ([0efd963](https://github.com/Chinlinlee/raccoon-dicom/commit/0efd9630cc299678528fb808676a3a3c697b8216))
* Retrieve Thumbnail Resources APIs ([8fc1a0b](https://github.com/Chinlinlee/raccoon-dicom/commit/8fc1a0b9c1b60d88aed5a6b811d2254b690373bd))
* Retrieve Transaction Metadata Resources APIs ([30e13ae](https://github.com/Chinlinlee/raccoon-dicom/commit/30e13ae38acb70c51d96391926823138a6e48cca))
* Retrieve Transaction Rendered Resources APIs ([c21c55e](https://github.com/Chinlinlee/raccoon-dicom/commit/c21c55e259692248e418d7f876ccb157bacebf40))
* search instances in a series by uids API ([be576b6](https://github.com/Chinlinlee/raccoon-dicom/commit/be576b681a036d5f66f11becdf57261af871baa7))
* search instances in a study by study uid API ([2f066aa](https://github.com/Chinlinlee/raccoon-dicom/commit/2f066aab1e90f3e295b6dee0ea12315a47402e4c))
* search patient API ([34103a5](https://github.com/Chinlinlee/raccoon-dicom/commit/34103a581fc32a6fa896ad80415d64ee7fe853fd))
* search series in a study by study uid API ([7672b4b](https://github.com/Chinlinlee/raccoon-dicom/commit/7672b4b4420f6b7bb7be7a46af14fab9d76bf3a5))
* series create person names when creation ([e567951](https://github.com/Chinlinlee/raccoon-dicom/commit/e567951a08b2614c35196c6deddb9ca8cd0a9d50))
* series query with series instance uid ([adf0455](https://github.com/Chinlinlee/raccoon-dicom/commit/adf0455c4cd87443e8dac1da57855aaab3580be3))
* series sql model, and store series ([d16c095](https://github.com/Chinlinlee/raccoon-dicom/commit/d16c095e0ee310f0750cbf777ed71a979821a6f3))
* set UIDs of level to primary key ([f085f7c](https://github.com/Chinlinlee/raccoon-dicom/commit/f085f7c6a244300389f4c83902b2d9a948001ffc))
* store dicom code items in UPS work item ([4cb8ecd](https://github.com/Chinlinlee/raccoon-dicom/commit/4cb8ecd33f57654348a74e84f0a2e90f9e6daa14))
* store transfer syntax UID for instance ([9ce4213](https://github.com/Chinlinlee/raccoon-dicom/commit/9ce42133c2ee13c5c823c7e598dd884742807521))
* study getDicomJson fn ([fe04b33](https://github.com/Chinlinlee/raccoon-dicom/commit/fe04b33f7029eb93bf1bd996db4b0fa5ea345922))
* study model to be one to many association ([bf117fe](https://github.com/Chinlinlee/raccoon-dicom/commit/bf117fe39f35c2d9cfd39ba446b19bf3e43e94d9))
* **study:** complete person name query ([7ac8ace](https://github.com/Chinlinlee/raccoon-dicom/commit/7ac8ace2a06120dc053057673a83e0658e2e9447))
* support build date time query ([21750b6](https://github.com/Chinlinlee/raccoon-dicom/commit/21750b6f44b010ffaf35cd913c1492d6e644948f))
* support hierarchy level query ([51c7a0b](https://github.com/Chinlinlee/raccoon-dicom/commit/51c7a0b3a60c97e64cfd5b7080b704391db63cc2))
* support iccprofile ([588f05f](https://github.com/Chinlinlee/raccoon-dicom/commit/588f05fc9c6d1c539b6707e3a328ef9a217bf973))
* support switch to mongodb mode with module alias ([dcfe3aa](https://github.com/Chinlinlee/raccoon-dicom/commit/dcfe3aaa80d975a32a4745c9f9b3f4d46324511d))
* support tag filed or human readable field for query builder ([fca2bbb](https://github.com/Chinlinlee/raccoon-dicom/commit/fca2bbb48925524818e3a2c2074b8e4485166b34))
* support wildcard search of string querying ([73d8e97](https://github.com/Chinlinlee/raccoon-dicom/commit/73d8e97e58a2ff1eae50f1d21c4f9d593815c49a))
* update 0040A043, 0040A730 when upload exist ([e8d6da4](https://github.com/Chinlinlee/raccoon-dicom/commit/e8d6da4e32099aa7b54bb9647e0375f4f60b8910))
* update exist item when store instance ([b942171](https://github.com/Chinlinlee/raccoon-dicom/commit/b9421710d2e4009383fa0d57244bd493aaf908bd))
* update modalities in study after storing ([e6a3c39](https://github.com/Chinlinlee/raccoon-dicom/commit/e6a3c392845130a6a5c9e24733fb4c7d6cff3b76))
* update patientID (x00100020) to unique ([99a564e](https://github.com/Chinlinlee/raccoon-dicom/commit/99a564ef79af6b573641a6ad2c8c8d7efb5570e7))
* update save method in UPS ([1768e9c](https://github.com/Chinlinlee/raccoon-dicom/commit/1768e9c9c1728400707c969453f07370386635ef))
* Update SQL configuration to include a logging option ([a946c2d](https://github.com/Chinlinlee/raccoon-dicom/commit/a946c2df2365494a38725f1df60f33ebfa9ab90b))
* **UPS-SQL:** Update code association to use 'belongsTo' ([1772da8](https://github.com/Chinlinlee/raccoon-dicom/commit/1772da8ca95fb90db66142ddd1081e041aa04c5c))
* use `dicomjson-to-fhir` instead of original handwritten functions ([f547447](https://github.com/Chinlinlee/raccoon-dicom/commit/f547447346652484c8335640d3c54fc38fe8c387))
* use dcm4che dcm2json instead of dcmtk ([89e385b](https://github.com/Chinlinlee/raccoon-dicom/commit/89e385b01e808d22267a590c28ccc42e58491665))
* WADO-RS Retrieve Instance Resources APIs ([eb26522](https://github.com/Chinlinlee/raccoon-dicom/commit/eb26522b66f67943ed37e7f19ee2709bccee70fc))
* WADO-URI ([2f0be9c](https://github.com/Chinlinlee/raccoon-dicom/commit/2f0be9cde42053daebceab3a1e0c71158dfc7675))
* **WIP:** instance query builder ([2ea6320](https://github.com/Chinlinlee/raccoon-dicom/commit/2ea6320eaabca0d639b7e1dde56a14867a66bf60))
* **WIP:** query ([8f14829](https://github.com/Chinlinlee/raccoon-dicom/commit/8f148297598d781ac07efa313ff23d00b898149e))
* **WIP:** series query builder ([c3f604d](https://github.com/Chinlinlee/raccoon-dicom/commit/c3f604d3c8f45497d71195345efdc761d6532b44))
* wrap `findMwlItems` in mwl item model ([094b637](https://github.com/Chinlinlee/raccoon-dicom/commit/094b637519ac18199d6bd390aa7689627c79bd35))


### Bug Fixes

* `auditInstanceTransferred`  call in controller ([5aca989](https://github.com/Chinlinlee/raccoon-dicom/commit/5aca989ce71984ec081d40c97b5ab8b2df371cd1))
* `getAuditInstancesInfoFromStudyUID` not handle empty studyUID ([6b667a2](https://github.com/Chinlinlee/raccoon-dicom/commit/6b667a29a86018ff519e1191ce5bc87b88914af5))
* `PatientModel` not load in `dicom-json-model` ([fc859ac](https://github.com/Chinlinlee/raccoon-dicom/commit/fc859ac48bb60a19e44c03a7c2c3805f49725d5b))
* Add method to increment delete status for hierarchical image ([bb4616a](https://github.com/Chinlinlee/raccoon-dicom/commit/bb4616af5593672bbb549b5d22cd9022c07d9741))
* adjustment of sps is incorrect in create service ([b65061e](https://github.com/Chinlinlee/raccoon-dicom/commit/b65061e37bee2f8d326a74e6d835c1aa515a5402))
* can not load .model.js ([3fe3ed4](https://github.com/Chinlinlee/raccoon-dicom/commit/3fe3ed4a37c387486575b48f5d4669b11d76f460))
* cannot query with comma of attributes ([4663e11](https://github.com/Chinlinlee/raccoon-dicom/commit/4663e116e4fc5477932642d381b92177960159a2))
* cannot query with comma of PN attributes ([45a8fcd](https://github.com/Chinlinlee/raccoon-dicom/commit/45a8fcd9c5ae4852eff6cf1db4ec313799b048a4))
* circular in `dicom-json-model` ([a9c8e2f](https://github.com/Chinlinlee/raccoon-dicom/commit/a9c8e2f6924935ba1c3ae588a35a7d22f2f10502))
* delete status overwrite original query ([8c060d6](https://github.com/Chinlinlee/raccoon-dicom/commit/8c060d67c0c8fd44c5d6dc1e483be5beefacb46d))
* dicom json model should input object not array ([693f8de](https://github.com/Chinlinlee/raccoon-dicom/commit/693f8de259846d3a1ec7aa80696dd4418eafbdfc))
* **dimse:** the issue of file path in different operating systems ([b23d78a](https://github.com/Chinlinlee/raccoon-dicom/commit/b23d78a56c4f33745fcad6f9b5eebbd4547332f6))
* expose all error to client ([55e1dcf](https://github.com/Chinlinlee/raccoon-dicom/commit/55e1dcfe32d8ae6a089aea611cbe42294b623693))
* filtered global subscription not working ([1336ba7](https://github.com/Chinlinlee/raccoon-dicom/commit/1336ba778d339b234b2e1f3539ea54743f69acae))
* incorrect args position in `raiseInternalServerError` ([c9ca0ff](https://github.com/Chinlinlee/raccoon-dicom/commit/c9ca0ff6840732f19d21664c4c3dbd4978c29673))
* incorrect deletion path of study and series ([dd48303](https://github.com/Chinlinlee/raccoon-dicom/commit/dd48303a674286508ea8a34e6a142f4ff78cb765))
* incorrect frame when retrieve multiple frames ([e870cb1](https://github.com/Chinlinlee/raccoon-dicom/commit/e870cb1c5221708a2ab94f9b52ed6dbbf76e6a2a))
* incorrect import statement for workItemModel ([20bf8df](https://github.com/Chinlinlee/raccoon-dicom/commit/20bf8df26b4e5a9970a8aac1a220f1b7efc277b9))
* incorrect require path ([b4e347f](https://github.com/Chinlinlee/raccoon-dicom/commit/b4e347fa9cc69bf402bcbf95e3f27e24d8ea11e4))
* incorrect result of querying instance in study ([5c9b223](https://github.com/Chinlinlee/raccoon-dicom/commit/5c9b2231fa02ac244e547301566e8453f6f436bb))
* incorrect store json in series ([343e945](https://github.com/Chinlinlee/raccoon-dicom/commit/343e945e3b678959523bd0b22d3ffc07e9ceb487))
* incorrect type of x00080104 in code schema ([7d3f83b](https://github.com/Chinlinlee/raccoon-dicom/commit/7d3f83b61b7e948425630036c3dbdb4c61100c91))
* missing adaptor for mongodb for audit message factory ([e854c97](https://github.com/Chinlinlee/raccoon-dicom/commit/e854c97ebd7fe2ec5551fd2466c5373bf0559d07))
* missing assign `apiLogger` in `this` of `storeInstanceController` ([e3fa12b](https://github.com/Chinlinlee/raccoon-dicom/commit/e3fa12b7e2468fbbbaa3e379e2a8984186e631a3))
* missing await for async function ([430e2cc](https://github.com/Chinlinlee/raccoon-dicom/commit/430e2cc5a19cec13d9ae5428b33231a05cd88d5b))
* missing delete instance file in deletion ([55ef94f](https://github.com/Chinlinlee/raccoon-dicom/commit/55ef94fc6afecf6273319d38f4cb8bf5c3a223df))
* missing mongodb env example ([766fe20](https://github.com/Chinlinlee/raccoon-dicom/commit/766fe20963e2347b6013de1319db53acf4c0b710))
* missing store `00400100` Scheduled Procedure Step Seq to DB ([0e1dc3a](https://github.com/Chinlinlee/raccoon-dicom/commit/0e1dc3aefe271128cead88677ab4ad037c707a05))
* missing update work item dicom json usage ([3592f10](https://github.com/Chinlinlee/raccoon-dicom/commit/3592f101efa540391f49d70b13b1d18f38e8fb02))
* missing use series match iterator proxy ([3bbcfec](https://github.com/Chinlinlee/raccoon-dicom/commit/3bbcfec162796f43c5136d8eae9266b8cf2db2d1))
* module alias name not consist ([bdc1ebe](https://github.com/Chinlinlee/raccoon-dicom/commit/bdc1ebef267b3ebd21b8f62e8f5af49dfa89e4cc))
* **mongodb:** get/count MWL items API broken ([3e022d1](https://github.com/Chinlinlee/raccoon-dicom/commit/3e022d1f8753eb28b5a8073027db17ba6150eeeb))
* **mongodb:** missing `00100020` in updated patient ([0e96bde](https://github.com/Chinlinlee/raccoon-dicom/commit/0e96bdeff2ddf47892a03519904525cd2e5a666e))
* **mongodb:** not save audit message into db ([13c6619](https://github.com/Chinlinlee/raccoon-dicom/commit/13c6619b63ba4661af7f51d4aab9fdb23493150a))
* **mongodb:** query object incorrect in `checkPatientExist` ([50429e6](https://github.com/Chinlinlee/raccoon-dicom/commit/50429e66261a294474ba2b1acf75acf18ddf2af3))
* **mongodb:** toDicomJsonModel is not a function that missing consistent ([f08bf44](https://github.com/Chinlinlee/raccoon-dicom/commit/f08bf44373c7dba1862cd709da1fa9d465131cb5))
* move `findOneByDicomUID` to static ([46031c9](https://github.com/Chinlinlee/raccoon-dicom/commit/46031c9763f2de8b12d86ce4e93f5916be8e74a3))
* not append reason code when change state to canceled for work item ([d2ed93c](https://github.com/Chinlinlee/raccoon-dicom/commit/d2ed93c9234afad59f298d4202f14e9dc7acd735))
* not exist function `writeSpecificFramesRenderedImages` ([2b4e5db](https://github.com/Chinlinlee/raccoon-dicom/commit/2b4e5db5c97edb682e00e9a254d65fdcf2bbb1d4))
* query param to dicom tag wrong ([f48a5c0](https://github.com/Chinlinlee/raccoon-dicom/commit/f48a5c0b47e2355bc20fc43e4fa936e005e40fb5))
* series match iterator proxy is not working ([320896f](https://github.com/Chinlinlee/raccoon-dicom/commit/320896f53b733f91e8837d9ff3e4cae52ea59d1b))
* set header when response sent in ApiErrorHandler ([432ce6b](https://github.com/Chinlinlee/raccoon-dicom/commit/432ce6ba378760c18949e4191f6cbd2a1c18fe59))
* should use `originUrl` in `postProcess` ([071ad0e](https://github.com/Chinlinlee/raccoon-dicom/commit/071ad0ef0a289d0dcda61a85b4f7337e15f7170b))
* sps not assigned correct ([7ab6685](https://github.com/Chinlinlee/raccoon-dicom/commit/7ab6685e29e5e00562af2e1db660e80d32994d30))
* stow rs service usage missing res parameter ([2904d45](https://github.com/Chinlinlee/raccoon-dicom/commit/2904d45bcf1efb7765abc8004352b3756fb90dc4))
* the argument should be work item model obj ([1b85848](https://github.com/Chinlinlee/raccoon-dicom/commit/1b858486d6f56e0b45c84b691b99ccfebee6902e))
* ths tls is not applied cause handshake_failed ([40e4fd3](https://github.com/Chinlinlee/raccoon-dicom/commit/40e4fd3000a29e87937a58d26f33589952eed80a))
* typo ([f201219](https://github.com/Chinlinlee/raccoon-dicom/commit/f20121961cdba807f7c3aad6fcea68736fcdb3e7))
* VR of sequence is empty of `setValue` in BaseDicomJson ([a98b142](https://github.com/Chinlinlee/raccoon-dicom/commit/a98b14291cbb33677739dab41822bad7a5dd3d86))


### Build

* add `SQL_LOGGING` and `SQL_FORCE_SYNC` in .env ([2624db4](https://github.com/Chinlinlee/raccoon-dicom/commit/2624db4410014601204414f9c71abef401b594ad))
* add generate erd tool ([3340f89](https://github.com/Chinlinlee/raccoon-dicom/commit/3340f893fe8088eebe22764797602f0ada6f4d9c))
* update .env template ([9a8ac01](https://github.com/Chinlinlee/raccoon-dicom/commit/9a8ac010bd8ab24fe29fb7bd6cc32d3dddffb919))

## [1.4.0](https://github.com/Chinlinlee/raccoon-dicom/compare/v1.3.0...v1.4.0) (2023-08-29)


### Features

* [#15](https://github.com/Chinlinlee/raccoon-dicom/issues/15) add `onQuery` audit message for C-FIND ([7bba8fb](https://github.com/Chinlinlee/raccoon-dicom/commit/7bba8fb1146a463d5cff1131906dd7ed64c403c9))
* [#15](https://github.com/Chinlinlee/raccoon-dicom/issues/15) add onDicomInstancesAccessed ([1088727](https://github.com/Chinlinlee/raccoon-dicom/commit/1088727a503c2cbb03d86bf00a00d479dd1be507))
* [#15](https://github.com/Chinlinlee/raccoon-dicom/issues/15) add STORE_BEGIN for storing ([f504bab](https://github.com/Chinlinlee/raccoon-dicom/commit/f504bab96e124350090365335f8d63278e4ea6d2))
* [#15](https://github.com/Chinlinlee/raccoon-dicom/issues/15) audit message for C-MOVE ([ca4e537](https://github.com/Chinlinlee/raccoon-dicom/commit/ca4e537f0c012919d26c34bf7e1d02600fddbaa4))
* [#15](https://github.com/Chinlinlee/raccoon-dicom/issues/15) audit message for QIDO-RS ([14c21e0](https://github.com/Chinlinlee/raccoon-dicom/commit/14c21e00119cb7405fa364389681b80720fdec57))
* [#15](https://github.com/Chinlinlee/raccoon-dicom/issues/15) audit message for WADO-URI ([b728881](https://github.com/Chinlinlee/raccoon-dicom/commit/b728881bd1a6e68779b4aa75d58ad6b0ff3e2cd4))
* [#15](https://github.com/Chinlinlee/raccoon-dicom/issues/15) dicom instances accessed for C-FIND ([d479fe9](https://github.com/Chinlinlee/raccoon-dicom/commit/d479fe95847144e9b629d31cee190c7e93fb23e8))
* [#15](https://github.com/Chinlinlee/raccoon-dicom/issues/15) log failure audit when store failure ([cada1a5](https://github.com/Chinlinlee/raccoon-dicom/commit/cada1a534e432d24618b2cc1394bb1ce751c2c91))
* [#15](https://github.com/Chinlinlee/raccoon-dicom/issues/15) onQuery audit message ([d02d53e](https://github.com/Chinlinlee/raccoon-dicom/commit/d02d53e9c6208361d0ee379659060ec5bedb0c3e))
* [#15](https://github.com/Chinlinlee/raccoon-dicom/issues/15) set event result to failure when study id inconsistent ([5fe83d0](https://github.com/Chinlinlee/raccoon-dicom/commit/5fe83d087de6b37f398b8df6096f5cf93d773770))
* [#15](https://github.com/Chinlinlee/raccoon-dicom/issues/15) store audit message for storing ([7be86aa](https://github.com/Chinlinlee/raccoon-dicom/commit/7be86aa34d2471d3365efedc8c331ee699dd96f1))
* add common fns for audit message ([8e7d171](https://github.com/Chinlinlee/raccoon-dicom/commit/8e7d1718ea9fb12e5be75a8919d769a602a80a3f))
* add log for DIMSE service ([4b6ba4d](https://github.com/Chinlinlee/raccoon-dicom/commit/4b6ba4d404eda31ff14ae8f7db5cf004c1903404))
* add retrieve end of event type ([9c1d703](https://github.com/Chinlinlee/raccoon-dicom/commit/9c1d703a0a5a8a394e079b39ae884a08667d0d9f))
* audit message for WADO-RS ([f2a9f38](https://github.com/Chinlinlee/raccoon-dicom/commit/f2a9f384dcc0ed6445f900b2208e7a31ed8c5725))
* log DIMSE query and extend parent's queries ([9315729](https://github.com/Chinlinlee/raccoon-dicom/commit/93157293f2083f39a1e42f1df80a38bed170050c))
* ~~remove `A.X.3.3` message in store ([87396d3](https://github.com/Chinlinlee/raccoon-dicom/commit/87396d3c5298c9aba17dbf4344a7af97d02937aa))~~
* store audit message ([e9c68cc](https://github.com/Chinlinlee/raccoon-dicom/commit/e9c68cc9f47c440c6f34ef1bca7f377a599dbc73))
  * first version


### Bug Fixes

* incorrect active participant role ID Code ([8323117](https://github.com/Chinlinlee/raccoon-dicom/commit/83231175f9aaf596f7a68fb3acb38bffe42a560b))
* missing await for `getGeneralEvent` ([8bbe7bd](https://github.com/Chinlinlee/raccoon-dicom/commit/8bbe7bd03308983b4258b939a03c81054d541b39))
* should be source for client of STORE_CREATE ([4a72666](https://github.com/Chinlinlee/raccoon-dicom/commit/4a726662cffbeea43960096097cfeb7c6aa8941a))

## [1.3.0](https://github.com/Chinlinlee/raccoon-dicom/compare/v1.2.0...v1.3.0) (2023-08-23)
### Major Changes
#### DIMSE
Now, we no longer use [dcm4che-tool-dcmqrscp-raccoon-dicom](https://github.com/Chinlinlee/dcm4che-tool-dcmqrscp-raccoon-dicom) to start raccoon's DIMSE service. Instead, we have made some modifications to the original classes of the DCM4CHE's DIMSE service and implemented it on raccoon using node-java-bridge.

You can find detailed implementation code in the `dimse` folder.

### Features

* [#14](https://github.com/Chinlinlee/raccoon-dicom/issues/14) ([fb151c3](https://github.com/Chinlinlee/raccoon-dicom/commit/fb151c39fed6de3d18d331ff8cae22208110ae70))
* add 0040A073 schema def in instance schema ([066d21e](https://github.com/Chinlinlee/raccoon-dicom/commit/066d21e12d5a602b80bf091ab40a39807a65a339))
* add DIMSE study C-Find ([8299656](https://github.com/Chinlinlee/raccoon-dicom/commit/82996568dabfc493f6e304f97b815f8de1ab201b))
* add DT mongodb schema definition ([9e82bff](https://github.com/Chinlinlee/raccoon-dicom/commit/9e82bff3f449554fb198aaeaae00776e4221fe83))
* add instance query task ([1c11f1d](https://github.com/Chinlinlee/raccoon-dicom/commit/1c11f1deb1be0f3c28d26cfd3239738dc62577bd))
* C GET DIMSE Service ([bfa8926](https://github.com/Chinlinlee/raccoon-dicom/commit/bfa8926f21ac81dfe71b2ebeafe2e3174c501524))
* C-Move DIMSE service ([e6837a7](https://github.com/Chinlinlee/raccoon-dicom/commit/e6837a7075f7916b2092127b92af4feabd79bde4))
* C-Move DIMSE service ([038d0a2](https://github.com/Chinlinlee/raccoon-dicom/commit/038d0a243942adb1ccf13a81ef06e1b52a7113ad))
* **dimse:** add config class and conn config ([2c2a919](https://github.com/Chinlinlee/raccoon-dicom/commit/2c2a9190cf676e7d362a9ffca99f52850de65fb9))
* **dimse:** add configure TLS ([7dd0b1e](https://github.com/Chinlinlee/raccoon-dicom/commit/7dd0b1e86a8977b005df6f84effec0ba71633c11))
* implement patient query of C-Find ([1a99d45](https://github.com/Chinlinlee/raccoon-dicom/commit/1a99d45dc4a9930e726073d34c01a0215c8bf314))
* series query of C-Find service ([f23827c](https://github.com/Chinlinlee/raccoon-dicom/commit/f23827c339623e9e3e6425e275b492bcbca2b29d))
* Storage Commitment SCP ([5415ece](https://github.com/Chinlinlee/raccoon-dicom/commit/5415ece100820404d5bc22ed6f10a60aa5b52527))
* support date time query ([8810a32](https://github.com/Chinlinlee/raccoon-dicom/commit/8810a3292c9b54642eef2cec738e958a12f41185))
* use js class to start up dcm qr scp ([b9e4adc](https://github.com/Chinlinlee/raccoon-dicom/commit/b9e4adc42d52c9a15d0b943f9514b4643dc09db3))


### Bug Fixes

* can not found java class ([1f2aa25](https://github.com/Chinlinlee/raccoon-dicom/commit/1f2aa256c4493821ae5ff054e351369ba888eecd))
* incorrect logic for c-find querying ([4e9dc0a](https://github.com/Chinlinlee/raccoon-dicom/commit/4e9dc0ab269c7a07b1e44d66b2b5a194cda6665c))
* missing create series query task inject proxy ([22f5f86](https://github.com/Chinlinlee/raccoon-dicom/commit/22f5f86f1826f1a400ea3a6e77b86aa2b6bb209d))
* SQ conversion query object incorrect ([cd1a2ac](https://github.com/Chinlinlee/raccoon-dicom/commit/cd1a2ac31eeb8d67b74434c19a39cde9015eb259))
* SQ query field incorrect ([25d2ea2](https://github.com/Chinlinlee/raccoon-dicom/commit/25d2ea255f01399035b8de503bfdeb240911e962))
* tag of dimse query is not correct ([faa7f6e](https://github.com/Chinlinlee/raccoon-dicom/commit/faa7f6effd1994b4b9d802390cc24e42bd1b799d))


### Build

* run npm audit fix ([f7414b5](https://github.com/Chinlinlee/raccoon-dicom/commit/f7414b5130e521e91204572f80aea039dbb3b53c))

## [1.2.0](https://github.com/Chinlinlee/raccoon-dicom/compare/v1.1.0...v1.2.0) (2023-06-17)


### Features

* [#11](https://github.com/Chinlinlee/raccoon-dicom/issues/11) ([7d2d9ed](https://github.com/Chinlinlee/raccoon-dicom/commit/7d2d9ed000d32bbc87aade7d0a16a1eef9d66a20))


### Bug Fixes

* wrong config filename of plugin of checking ([4b6de1a](https://github.com/Chinlinlee/raccoon-dicom/commit/4b6de1aa70d02e2e71ff5d86c7da0b57d134f247))

## [1.1.0](https://github.com/Chinlinlee/raccoon-dicom/compare/v1.0.1...v1.1.0) (2023-06-15)


### Features

* [#10](https://github.com/Chinlinlee/raccoon-dicom/issues/10) ([f617273](https://github.com/Chinlinlee/raccoon-dicom/commit/f617273cecdb7c764f45e48d76135590d6a7ca9f))
* add `update workitem` API ([6d921bb](https://github.com/Chinlinlee/raccoon-dicom/commit/6d921bbdcd0983ea190985d47b91e47cf7e5f15b))
* add base dcm2dcm ([d71d895](https://github.com/Chinlinlee/raccoon-dicom/commit/d71d895f9b221850a621b2d8e8267c771b2efbdf))
* add dicom error status ([eb69a59](https://github.com/Chinlinlee/raccoon-dicom/commit/eb69a59e18a2ad3df8627008de8a9b2ca2074b03))
* add MONGODB_OPTIONS to .env ([bbfdd11](https://github.com/Chinlinlee/raccoon-dicom/commit/bbfdd1154f0e5bbcb007bff413faa972c860c36f))
* add request query to string in controller ([2695ccd](https://github.com/Chinlinlee/raccoon-dicom/commit/2695ccdc82a1bedd892e61c1a47d1bb735eee258))
* add un subscription API ([28e35f4](https://github.com/Chinlinlee/raccoon-dicom/commit/28e35f41dd81d6daa66901e469677ec155a01607))
* add update event for subscription ([35347fe](https://github.com/Chinlinlee/raccoon-dicom/commit/35347fe2ab0573f2e01d7f62f8510f6121f739c6))
* add ups cancel request API ([1d2c07a](https://github.com/Chinlinlee/raccoon-dicom/commit/1d2c07a5b2b4b85ed373960eaa0a93bbfcb511f9))
* change state event ([08ae3f2](https://github.com/Chinlinlee/raccoon-dicom/commit/08ae3f289207c946934dadd9896c44eae9130bb2))
* change workitem state API ([eb6ed91](https://github.com/Chinlinlee/raccoon-dicom/commit/eb6ed9187bdcd61a8cbd5081e09c77a0662c5f55))
* check DIMSE is setup or not ([bb30a34](https://github.com/Chinlinlee/raccoon-dicom/commit/bb30a34b9ad2618d5a4af1b7ce922216821fbb23))
* global subscription, event for creating ([c985d94](https://github.com/Chinlinlee/raccoon-dicom/commit/c985d948adc48496f693c8487d4d13cd9cac8d81))
* **qido-rs:** support time query ([9d7ec94](https://github.com/Chinlinlee/raccoon-dicom/commit/9d7ec9468031da3d9ca938dd5d21694c1633b610))
* retrieve UPS by instance UID ([2712733](https://github.com/Chinlinlee/raccoon-dicom/commit/2712733aecf9ab6ba17db979ab456ed870eaaa3d))
* subscription API ([98b3f34](https://github.com/Chinlinlee/raccoon-dicom/commit/98b3f345003fcefb0df11339322596be06370b8f))
* suspend subscription and add API docs ([7952464](https://github.com/Chinlinlee/raccoon-dicom/commit/7952464b4e64ebf2322410fc24d439cd481db5ec))
* throw error when query key invalid (+1 squashed commits) ([017c18e](https://github.com/Chinlinlee/raccoon-dicom/commit/017c18e674e4dff604fdea8acd9579b214e99d92))
* **UPS-RS:** add create and get workitem APIs ([4d55216](https://github.com/Chinlinlee/raccoon-dicom/commit/4d552160d591d8f79af3315ea8765816a265006a))
* use cors only in dev NODE_ENV ([c19d8b0](https://github.com/Chinlinlee/raccoon-dicom/commit/c19d8b0b1183ce691ddcf8abddfbf12d71a7ab1b))


### Bug Fixes

* [#6](https://github.com/Chinlinlee/raccoon-dicom/issues/6) ([9f1948a](https://github.com/Chinlinlee/raccoon-dicom/commit/9f1948a07a3109363c8c89abdadd0b11292709cb))
* cannot cmove study just with UID ([1d8f7bb](https://github.com/Chinlinlee/raccoon-dicom/commit/1d8f7bb33b36523841163fc1663b167b98db42e2))
* incorrect tag for transaction uid ([8137620](https://github.com/Chinlinlee/raccoon-dicom/commit/81376208de0a764efa9703d1f202ef4fa38dc58c))
* invalid `subscribed` field in query matching ([e904b7c](https://github.com/Chinlinlee/raccoon-dicom/commit/e904b7cd6f5e9c2dd03e88d03fbfa6339f128f86))
* joi validator return wrong value ([8dd66f3](https://github.com/Chinlinlee/raccoon-dicom/commit/8dd66f3e75eb9baaa2fac74baf0b5dc29dcb981b))
* missing patient attribute in workitem ([f778760](https://github.com/Chinlinlee/raccoon-dicom/commit/f7787608085a34ff1c286ab7767c6588f9154b19))
* not fire init events when create global sub ([f9fa5bd](https://github.com/Chinlinlee/raccoon-dicom/commit/f9fa5bd81791f7a1ce9ca6cfb670cbab33dc7f50))
* not parse application/dicom+json to json ([8838616](https://github.com/Chinlinlee/raccoon-dicom/commit/88386168e7135e39da409cf714d6d2a07c011e22))
* response wrong status when empty result ([20fc53c](https://github.com/Chinlinlee/raccoon-dicom/commit/20fc53c1757ec0c65b3a2bd239b1e812dea3d4ad))
* should not present transaction UID in query ([3481b62](https://github.com/Chinlinlee/raccoon-dicom/commit/3481b628f8968639b121a9286411c68557205c16))
* wrong way to do time query ([e270a6c](https://github.com/Chinlinlee/raccoon-dicom/commit/e270a6ce0c46c5659e1b587e1f4c142480314bed))


### Build

* default enable DIMSE in .env.template ([636e64f](https://github.com/Chinlinlee/raccoon-dicom/commit/636e64ff3529105585cffef1b7f0463ce33cfd3e))
* **dimse:** update example config ([61a1904](https://github.com/Chinlinlee/raccoon-dicom/commit/61a190430b998eca91835b49c018113cc1ee4f03))
* **docker:** install imagemagick ([c5443f4](https://github.com/Chinlinlee/raccoon-dicom/commit/c5443f498cd8a5366c7d4875cf22c13e3a659aa4))
* **log4js:** default support pm2 ([0155745](https://github.com/Chinlinlee/raccoon-dicom/commit/01557457ce150d716e74125c50bee303ca42cea4))
* update dcm4che bridge ts classes ([5858126](https://github.com/Chinlinlee/raccoon-dicom/commit/5858126853919c8c130e87991c355226c36f2b9c))

### [1.0.1](https://github.com/Chinlinlee/raccoon-dicom/compare/v1.0.0...v1.0.1) (2023-05-04)


### Bug Fixes

* naming incorrect about `stow` ([aa8b074](https://github.com/Chinlinlee/raccoon-dicom/commit/aa8b074233908005994382acef03a90b8bdb854c))

## 1.0.0 (2023-05-04)


### Features

* [#2](https://github.com/Chinlinlee/raccoon-dicom/issues/2) ([fa924a9](https://github.com/Chinlinlee/raccoon-dicom/commit/fa924a9253e63345cf641f585d889d5eabbc3977))
* `Controller` for supporting plugin pre/post ([6248724](https://github.com/Chinlinlee/raccoon-dicom/commit/62487248700aea3aba48ba725023a49c67733d03))
* add `DicomWebService` to handle common fns ([b636f48](https://github.com/Chinlinlee/raccoon-dicom/commit/b636f4885a9e3f836354d84d3d64e36c537994ab))
* add `QIDO-RS` of study level ([99a6283](https://github.com/Chinlinlee/raccoon-dicom/commit/99a62839f9ae09077064df5551f3481384808fa9))
* add `TM` tag's schema ([0ac51f1](https://github.com/Chinlinlee/raccoon-dicom/commit/0ac51f1dbb886ca584a84666b6aa7ee2f1e535e1))
* add API log for rendered instances frames ([4a76246](https://github.com/Chinlinlee/raccoon-dicom/commit/4a76246592fb9694221539556064f3d9d01c53fb))
* add API of query for series in a study ([a2eb251](https://github.com/Chinlinlee/raccoon-dicom/commit/a2eb251f2469a7470769d7c92796d13427cc6791))
* add config to determine whether sync FHIR ([052d8c4](https://github.com/Chinlinlee/raccoon-dicom/commit/052d8c4fac1abcae276b92581f132c94c875c1cf))
* add content-location header when retrieving ([6179073](https://github.com/Chinlinlee/raccoon-dicom/commit/6179073805b4066ca77268564aff8e78dc601ba6))
* add custom error ([fd8c654](https://github.com/Chinlinlee/raccoon-dicom/commit/fd8c6549c933e3031faf6108914d2db6074af2d7))
* add dcm4che tool (uft8 converter, dcm2jpg) ([730e0c0](https://github.com/Chinlinlee/raccoon-dicom/commit/730e0c057c151c7b9e995a6e54d76f8ba309c7a8))
* add delete API of DICOM hierarchy ([66865bc](https://github.com/Chinlinlee/raccoon-dicom/commit/66865bc472d29369a40dc67ff46d7043012ce282))
* add general API info log ([3dcd205](https://github.com/Chinlinlee/raccoon-dicom/commit/3dcd2052e88de6a2cb23892424ed3788028b3978))
* add index for UIDs ([b801f86](https://github.com/Chinlinlee/raccoon-dicom/commit/b801f86d61dfb637371bb557c6007a2ea254cd13))
* add instance level in a series of QIDO-RS ([baa5d4c](https://github.com/Chinlinlee/raccoon-dicom/commit/baa5d4c62d8bd9b14dcc8520058e49fe743ca6f0))
* add IS type schema & refactor getVRSchema ([6ad47db](https://github.com/Chinlinlee/raccoon-dicom/commit/6ad47db2734d5ca03f160a8febe05a23f001772b))
* add local uploader ([387620b](https://github.com/Chinlinlee/raccoon-dicom/commit/387620b34ba9a0c7ee33cfea87a7474d09de7ee4))
* add log4js `api` logger config ([3ed65f5](https://github.com/Chinlinlee/raccoon-dicom/commit/3ed65f587fbd8111f83a2a88d109b79527fec72d))
* add mediaStorageUID, ID ([7b77892](https://github.com/Chinlinlee/raccoon-dicom/commit/7b77892c42c25dfa509bd02723f6c9fa7ba1bde8))
* add method to write buffer to multipart ([87c10fb](https://github.com/Chinlinlee/raccoon-dicom/commit/87c10fb4afd1e0c20cae43338c93f5d7420ba6ee))
* add new error message of response ([30d9586](https://github.com/Chinlinlee/raccoon-dicom/commit/30d95861633c6c1e6f6ebe44a78eba30a246b336))
* add new QIDO-RS transations ([70efb15](https://github.com/Chinlinlee/raccoon-dicom/commit/70efb156bf9e65e5c200f0479f25fc6b44eb9804))
* add Patient schema, and store patient ([939e8a2](https://github.com/Chinlinlee/raccoon-dicom/commit/939e8a2a3ae7c589359b982181d23f96874f42b8))
* add plugin mechanism ([7e57425](https://github.com/Chinlinlee/raccoon-dicom/commit/7e57425434895ae2f4562a09ae77178ebfc05835))
* add python logger ([a0fd614](https://github.com/Chinlinlee/raccoon-dicom/commit/a0fd6146ca9bef039155370c5a54378cbabe05b3))
* add Rendered Instance ([0f40a33](https://github.com/Chinlinlee/raccoon-dicom/commit/0f40a337c7a9a67e578435c1a0b8f7dac7410f01))
* add Rendered Series ([5d4d09f](https://github.com/Chinlinlee/raccoon-dicom/commit/5d4d09ffa4e793582ef6f7d360eda2b815af0993))
* add retrieve instance's metadata ([b0f9b09](https://github.com/Chinlinlee/raccoon-dicom/commit/b0f9b09309dc6cc55816ce904f43c62252d07528))
* add retrieve rendered frames ([ca1d81c](https://github.com/Chinlinlee/raccoon-dicom/commit/ca1d81c768099d4d5cd31c1c9a8479fc14a8f378))
* add retrieve series's instances metadata ([77aec48](https://github.com/Chinlinlee/raccoon-dicom/commit/77aec48ed25563c1a11a55484b23a785f0c19709))
* add retrieve study's instances metadata ([5a01d9d](https://github.com/Chinlinlee/raccoon-dicom/commit/5a01d9db8dd3357a9b0abbb57b695a000e7f81ec))
* add retrieve study's instances of `WADO-RS` ([3c83337](https://github.com/Chinlinlee/raccoon-dicom/commit/3c83337313362c1d9e2d91db5bc72c1f4a6f12eb))
* add retrieve study's series' instances ([1b0f235](https://github.com/Chinlinlee/raccoon-dicom/commit/1b0f235e047d387bf3868c3ce8d32c12afd1ab20))
* add retrieve thumbnail APIs ([3bcc342](https://github.com/Chinlinlee/raccoon-dicom/commit/3bcc342169a49a4086cea71b067d12bb5de36505))
* add swagger-jsdoc to generate openapi ([5b13539](https://github.com/Chinlinlee/raccoon-dicom/commit/5b1353983345c6eeede28844ac51a44a5c222869))
* add url util function ([4971704](https://github.com/Chinlinlee/raccoon-dicom/commit/4971704cad77ca50b4a77ddb15d2e7511e54182d))
* append `.dcm` of uploaded file ([a76eebf](https://github.com/Chinlinlee/raccoon-dicom/commit/a76eebfbdaa3baf702d171a5bc647a5c7bc122be))
* change method of query sutdy ([9e3c0fd](https://github.com/Chinlinlee/raccoon-dicom/commit/9e3c0fd7fdce43a5fb543a57a5b25735ba2f28be))
* config class to handle dotenv file ([ce47a4c](https://github.com/Chinlinlee/raccoon-dicom/commit/ce47a4c2be533b2e21a261c8c38b1946c4592475))
* create FHIR resource when doing `STOW-RS` ([b381036](https://github.com/Chinlinlee/raccoon-dicom/commit/b381036c8a3ec6c5a431a8094faecf404d7e4f45))
* **dcm2json:** correct DICOM when missing charset ([ad1f4d1](https://github.com/Chinlinlee/raccoon-dicom/commit/ad1f4d1c62ffbd20cbc575a01898c9cb5709b297))
* dcm4che QRSCP ([75236be](https://github.com/Chinlinlee/raccoon-dicom/commit/75236be29338409c5ec50dc8e7034c6cf84b20b4))
* emit background event status in `STOW-RS` ([3baf758](https://github.com/Chinlinlee/raccoon-dicom/commit/3baf758c6edb1cd5dac74db3abf85c33985ab9df))
* flexible QIDO-RS 00081190 ([18988e5](https://github.com/Chinlinlee/raccoon-dicom/commit/18988e580472db8e0bacc204a2a939f79ceb6ca7))
* generate API doc in docs/swagger folder ([d8ac79e](https://github.com/Chinlinlee/raccoon-dicom/commit/d8ac79e3224c278033d557b605a7da82a2c13423))
* generate jpeg of DICOM file when `STOW-RS` ([51fbd36](https://github.com/Chinlinlee/raccoon-dicom/commit/51fbd3613d356df89438fb70ec4a879b121a4e52))
* get DICOM frame image by dcmtk ([eeb7a76](https://github.com/Chinlinlee/raccoon-dicom/commit/eeb7a7607f996829f8bd80627131653e6fb303e8))
* get DICOM frame image by python ([d994f88](https://github.com/Chinlinlee/raccoon-dicom/commit/d994f8881de2bfbc1e984eae5b977ddf7a4418eb))
* get other fields in `getInstanceFrameObj` ([af5d59d](https://github.com/Chinlinlee/raccoon-dicom/commit/af5d59d9690920cb67959daa5ad57e16e5d40e81))
* get{level}DicomJson for storing into mongo ([7ceb1bb](https://github.com/Chinlinlee/raccoon-dicom/commit/7ceb1bb016320bad503107f5e13f4e26e953cd26))
* log processing of syncing DIOCM FHIR ([e549625](https://github.com/Chinlinlee/raccoon-dicom/commit/e54962511a18195c2023cf6ff4d725fa7c99db50))
* make dcm2jpg to static object ([215072c](https://github.com/Chinlinlee/raccoon-dicom/commit/215072c4c660d6313b63dd0a949832e4c78c9c61))
* multiple processes fn to one pipeline fn ([8e9e41d](https://github.com/Chinlinlee/raccoon-dicom/commit/8e9e41d93febfeb872c79c02ea286d14c3b52efd))
* QIDO-RS patients ([ea2bffd](https://github.com/Chinlinlee/raccoon-dicom/commit/ea2bffdb5ebdc32942bb84cec86f68906470ff6d))
* remove code about dcmtk and python ([ae5ceac](https://github.com/Chinlinlee/raccoon-dicom/commit/ae5ceac6bd28b2fd7c69df98d4921bf4ab311473)), closes [#2](https://github.com/Chinlinlee/raccoon-dicom/issues/2)
* remove user feature ([c494d36](https://github.com/Chinlinlee/raccoon-dicom/commit/c494d367c62180d89e164312ce7bcb534fac9640))
* replace `00101000`  to `00101002` ([4469096](https://github.com/Chinlinlee/raccoon-dicom/commit/4469096bc2ce25f538ecb68c97666d2e25fd2e9e))
* response dicom multipart when `*` accept ([659c953](https://github.com/Chinlinlee/raccoon-dicom/commit/659c953a2a04edb015f7e30039145f2c04f23f2c))
* response not found when get inexist DICOM ([dcd90ca](https://github.com/Chinlinlee/raccoon-dicom/commit/dcd90ca643e1c1e38111e2519ae5916887f4bc2b))
* retrieve instance and move response method ([616cde2](https://github.com/Chinlinlee/raccoon-dicom/commit/616cde2258506559ecdabe4683bbbc8cde8535c4))
* retrieve study's rendered instances ([bf7919d](https://github.com/Chinlinlee/raccoon-dicom/commit/bf7919d825db353096e4eaeee356b7a792e9f79d))
* seperate dicom schema to 3 schemas ([e7684c1](https://github.com/Chinlinlee/raccoon-dicom/commit/e7684c19fd576dd51e4fa189111be8beafb1f591))
* store bulk data url instead of binary ([37f94a6](https://github.com/Chinlinlee/raccoon-dicom/commit/37f94a6650328724d8837834c2fc889ed82e8f88))
* **stow-rs:** calc and store additional tag ([4ae378c](https://github.com/Chinlinlee/raccoon-dicom/commit/4ae378c40e9cc08070d154a87cfb85127f8a04a3))
* support `?` match any single character ([3845e38](https://github.com/Chinlinlee/raccoon-dicom/commit/3845e389b7df545d118f376831d3dd02f5fc0d50))
* support `bulkdata` of DICOMweb API ([1dd1a23](https://github.com/Chinlinlee/raccoon-dicom/commit/1dd1a23956e0c4520d6a865b4717df24bfe22e64))
* support `iccprofile` ([1a762b0](https://github.com/Chinlinlee/raccoon-dicom/commit/1a762b0240671d21c99b1a7cf7e8bb30905af772))
* support `includefield` ([f23606d](https://github.com/Chinlinlee/raccoon-dicom/commit/f23606d65d01ee63adfec110e1d4db47206ec6e0)), closes [/dicom.nema.org/medical/dicom/current/output/html/part18.html#sect_8](https://github.com/Chinlinlee//dicom.nema.org/medical/dicom/current/output/html/part18.html/issues/sect_8)
* support comma-separated frame numbers ([5cf3e73](https://github.com/Chinlinlee/raccoon-dicom/commit/5cf3e736c994289cdd7bb6d93aafc0d6f3f1147a))
* support log RegExp ([5677940](https://github.com/Chinlinlee/raccoon-dicom/commit/56779400925429c01e742b36a26cfbfa4fd5a09c))
* support PN query ([61118d0](https://github.com/Chinlinlee/raccoon-dicom/commit/61118d04940fad83dd4eaa95dbd88574ade2ae3d))
* support WADO-URI ([6f29b12](https://github.com/Chinlinlee/raccoon-dicom/commit/6f29b12c95732dee0f12a8eef5cfff546629ffd2))
* update `dicom` schema ([2a5f1e5](https://github.com/Chinlinlee/raccoon-dicom/commit/2a5f1e56550ab4c36e5ba68be9526dc999569175))
* update dicom dictionary ([7d296da](https://github.com/Chinlinlee/raccoon-dicom/commit/7d296da7aed3086cb094ff2282de107c7f4a404b))
* update DICOM elements dictionary ([b5a3c7d](https://github.com/Chinlinlee/raccoon-dicom/commit/b5a3c7db9ffb98c770a44eab0c53d68778de8491))
* update store tag of study ([d95be91](https://github.com/Chinlinlee/raccoon-dicom/commit/d95be916f7b083964c1c83879fe1246744973732))
* update store tags of series ([bcee96a](https://github.com/Chinlinlee/raccoon-dicom/commit/bcee96a407b95be17c356d74a9d401048e4bdb27))
* use `cors()` instead of hardcode ([46dfb42](https://github.com/Chinlinlee/raccoon-dicom/commit/46dfb42637447dd6b77a6495dc92d094b716ec5e))
* use `getBasicURL` instead of duplicate code ([d6e400e](https://github.com/Chinlinlee/raccoon-dicom/commit/d6e400e9ad1898068437d7dae7aeaa1c9e1afa71))
* Use api logger appender instead of ApiLogger ([84f3621](https://github.com/Chinlinlee/raccoon-dicom/commit/84f3621680d2e2bdb068748e22ab4ed1bc760fd1)), closes [#1](https://github.com/Chinlinlee/raccoon-dicom/issues/1)
* use custom dcm2jpg wrapper ([fcdaedc](https://github.com/Chinlinlee/raccoon-dicom/commit/fcdaedc459bc806b8470c5a9b0813e6736cb9fbf))
* use express instead of polka ([2e8dc0e](https://github.com/Chinlinlee/raccoon-dicom/commit/2e8dc0ea9f9c877442bf7b0ee7ebf7ad6c401722))
* use reject instead of resolve false ([95e70d6](https://github.com/Chinlinlee/raccoon-dicom/commit/95e70d6e00023232bc2babe149b052d7159ed979))
* validator can validate by custom joi object ([49ce0d6](https://github.com/Chinlinlee/raccoon-dicom/commit/49ce0d66c184e9b02db5f2dd2facd902e2623a6c))
* **wado-rs:** send `content-length` of `zip` ([281927f](https://github.com/Chinlinlee/raccoon-dicom/commit/281927fbf9ef1d6b55df884fc351cf863d1a8faf))
* **wado-uri:** [#5](https://github.com/Chinlinlee/raccoon-dicom/issues/5) ([a877cd4](https://github.com/Chinlinlee/raccoon-dicom/commit/a877cd49d7dbf802862597f4bf2203d58efc2055))


### Bug Fixes

* .env not load when start out of project path ([03834ce](https://github.com/Chinlinlee/raccoon-dicom/commit/03834ce2ca532ec501ba3631a8e2f66ba680ec38))
* `ENV` env variable is not exists ([f80143c](https://github.com/Chinlinlee/raccoon-dicom/commit/f80143c3b0836e844fecd93758613f8d13b1594c))
* `initQuery_` should after get limit and skip ([48bcb0d](https://github.com/Chinlinlee/raccoon-dicom/commit/48bcb0d289fe30c74d4c949440dc87b8674eca67))
* add eslint and run it ([96ce2aa](https://github.com/Chinlinlee/raccoon-dicom/commit/96ce2aa9bf5b39b6eb7097f56a1f3028255e7e08))
* BulkDataURI's UIDs undefined ([e0602a9](https://github.com/Chinlinlee/raccoon-dicom/commit/e0602a965ac26ef8feef477852f48f3b963e83e8))
* cannot store value of VR `SQ` ([cf44360](https://github.com/Chinlinlee/raccoon-dicom/commit/cf443603c9d6266eac5bd29c710f870c2f629434))
* cmove incorrect in study and instance level ([27ec8e0](https://github.com/Chinlinlee/raccoon-dicom/commit/27ec8e0ad42990d3f14caf82f94ee3ffdae330db))
* DICOM dictionary.dicom is undefined ([fbc96d7](https://github.com/Chinlinlee/raccoon-dicom/commit/fbc96d7155b7d42f37aad0d72e28d7f7b32d58ae))
* doc null in post findOneAndUpdate function ([c80d5d0](https://github.com/Chinlinlee/raccoon-dicom/commit/c80d5d0a9e77d13aee9782f725c9aaf9eeeae124))
* docs.pop().pathList may undefined ([4a428d3](https://github.com/Chinlinlee/raccoon-dicom/commit/4a428d355afa31092b516eaf7374263515aa76a7))
* forget to replace with `doPipeline` to multiple processes ([fa19b70](https://github.com/Chinlinlee/raccoon-dicom/commit/fa19b7035a977f516e91e757c75b50c85ef9374f))
* frame number apply in `postProcessFrameImage` ([de2dd1a](https://github.com/Chinlinlee/raccoon-dicom/commit/de2dd1a5fb2605da20a35cb49eb0b48618650dc4))
* incorrect date value store in DB ([365592f](https://github.com/Chinlinlee/raccoon-dicom/commit/365592fa29055da34f6abe2641beaa418a5d5ea3))
* incorrect property ([5b0eb6c](https://github.com/Chinlinlee/raccoon-dicom/commit/5b0eb6c512de48467a009ca3e11c2b99497af23c))
* incorrect property of object ([c85f999](https://github.com/Chinlinlee/raccoon-dicom/commit/c85f9997d8e63950dbdbad86f5568fd5c620ba49))
* incorrect url value of study-series-instance ([c0d5aba](https://github.com/Chinlinlee/raccoon-dicom/commit/c0d5aba5c7aa954116d63110b0a0973d38ea3ae8))
* incorrect way to convert 00080061 to FHIR ([6876174](https://github.com/Chinlinlee/raccoon-dicom/commit/68761746e81e7e536a7272f49b0d588b3255813d))
* incorrect way to validate windowLevel's params ([161362e](https://github.com/Chinlinlee/raccoon-dicom/commit/161362e8042801d900c6088271c12987312ee6b0))
* invisible character in dicom dictionary ([a73cd86](https://github.com/Chinlinlee/raccoon-dicom/commit/a73cd8697a84694bc281d5d7084948d23e3350a7))
* missing 404 in retrieve rendered instance ([8e70d79](https://github.com/Chinlinlee/raccoon-dicom/commit/8e70d790c6914e52592e0bb768b3143097516584))
* missing baseUrl in BulkDataURI ([07d4cad](https://github.com/Chinlinlee/raccoon-dicom/commit/07d4cad8c01fbfe2f3eef0821afbe4aa8d634475))
* missing end res in retrieve instances ([6b5759b](https://github.com/Chinlinlee/raccoon-dicom/commit/6b5759b7f99de38616dc1a271ebc3c4f9ec60377))
* missing unset `InlineBinary` ([73a2e24](https://github.com/Chinlinlee/raccoon-dicom/commit/73a2e24305b8456bf8fa4da7dcd5f9e7e3ad4832))
* mongoose drop the QIDO filter ([d210647](https://github.com/Chinlinlee/raccoon-dicom/commit/d2106470a26e1a44416751d49ad18dca794b0386))
* not allowed empty routers in plugin ([2fe1fc4](https://github.com/Chinlinlee/raccoon-dicom/commit/2fe1fc4653c7103fd9c75b51df72168e7cbdf2d3))
* not response 204 when empty matched document ([4d8b4a1](https://github.com/Chinlinlee/raccoon-dicom/commit/4d8b4a18ece1fe75d30ad551087a1a18bf22443e))
* object present _id in PN VR in MongoDB ([4b73691](https://github.com/Chinlinlee/raccoon-dicom/commit/4b7369195df56cef70966dbc6ec5fb31517642a8))
* query date of end of day `yyyy-mm-dd` ([40b8ce4](https://github.com/Chinlinlee/raccoon-dicom/commit/40b8ce47abdbd0217919bebdbc21a43e18bc8a8e))
* store incorrect instance path on linux ([807ff60](https://github.com/Chinlinlee/raccoon-dicom/commit/807ff60d256bcfd40f060d689d01dd4efa3bc50e))
* study has `__v` field ([4f92965](https://github.com/Chinlinlee/raccoon-dicom/commit/4f92965d7404ed792de591f9a3076a53e5f925cc))
* study level of exist imagingStudy not update ([0cebc85](https://github.com/Chinlinlee/raccoon-dicom/commit/0cebc858dc218b56d3de5d812df13dd517c9a284))
* the instance store path is not relative ([c2c671e](https://github.com/Chinlinlee/raccoon-dicom/commit/c2c671e64763aa94d6ca1c0fb013b616cfde5151))
* the VR of `BulkDataURI` is not `UR` ([d24adff](https://github.com/Chinlinlee/raccoon-dicom/commit/d24adffe0c73bedfb0abe6dc11a83a8d510883c9))
* typo ([629e221](https://github.com/Chinlinlee/raccoon-dicom/commit/629e22196062fe333bbe303b1c63032c066a3a54))
* typo ([15ca32f](https://github.com/Chinlinlee/raccoon-dicom/commit/15ca32f926691e138767927055de45ba9603dd88))
* wado retrieve not exist instance must be 404 ([93596fd](https://github.com/Chinlinlee/raccoon-dicom/commit/93596fdc374b6b1182040445c3c2bd4de038e922)), closes [/dicom.nema.org/medical/dicom/current/output/html/part18.html#table_9](https://github.com/Chinlinlee//dicom.nema.org/medical/dicom/current/output/html/part18.html/issues/table_9) [/dicom.nema.org/medical/dicom/current/output/html/part18.html#table_10](https://github.com/Chinlinlee//dicom.nema.org/medical/dicom/current/output/html/part18.html/issues/table_10)
* wrong `00081190` in `instance` level ([a3244e4](https://github.com/Chinlinlee/raccoon-dicom/commit/a3244e48076f89ab7e65e24941c2c3745dc4fab9))


### Build

* add `dicom.dic` for dcmtk ([d2cb179](https://github.com/Chinlinlee/raccoon-dicom/commit/d2cb179f8908b0e93bab5fbea586f4ebe31713ef))
* add `FHIRSERVER_BASE_URL` in dotenv ([638d35a](https://github.com/Chinlinlee/raccoon-dicom/commit/638d35aa338755fedd1cdf4ff30cd631e8a18c48))
* add test workflows ([c62b6d2](https://github.com/Chinlinlee/raccoon-dicom/commit/c62b6d2e18cf6a64699e4ceb18d7e12c989547df))
* **ci:** add function test ([410728d](https://github.com/Chinlinlee/raccoon-dicom/commit/410728de016559bf06860bb3b14bb0201904e75d))
* **ci:** disable dimse ([52519bf](https://github.com/Chinlinlee/raccoon-dicom/commit/52519bf45d771e8e9af12fcfd74ef88b4ff39d04))
* **ci:** fix cp library path of dcm4che ([be40d11](https://github.com/Chinlinlee/raccoon-dicom/commit/be40d11f0188736ce5109fdccf980b96943d59fb))
* **ci:** fix libssl not found ([82dd916](https://github.com/Chinlinlee/raccoon-dicom/commit/82dd91639ae1db77795b01b88b7a5a46441807f4))
* **ci:** fix missing create .env ([f9d6e88](https://github.com/Chinlinlee/raccoon-dicom/commit/f9d6e88322e556c236b45e0ebeeeb93b38e53341))
* **ci:** fix permission denied of DICOM root path ([f31b01d](https://github.com/Chinlinlee/raccoon-dicom/commit/f31b01d82d270e635f8cffde571bdfdf3cc32eba))
* **ci:** missing echo to file ([9eab50c](https://github.com/Chinlinlee/raccoon-dicom/commit/9eab50c0dc52f15989da2d6213f0afafd8eb252f))
* **ci:** standard version ([f027d0b](https://github.com/Chinlinlee/raccoon-dicom/commit/f027d0b9eb9443d92bc0cb3a46a26dbaec0c8198))
* fix missing `}` ([7805e59](https://github.com/Chinlinlee/raccoon-dicom/commit/7805e594481bb656541709e0333ee24320356c64))
* fix token name ([51a01e5](https://github.com/Chinlinlee/raccoon-dicom/commit/51a01e51ce6a45db9e807c2836a8726586969e77))
* linux-x86-64, windows-x86-64 dcm4che's lib ([9ffb814](https://github.com/Chinlinlee/raccoon-dicom/commit/9ffb81441a73d5b10c34bd11156a170c4823ab6b))
* **pm2:** increase `max_memory_restart` to 4G ([fcb8cf5](https://github.com/Chinlinlee/raccoon-dicom/commit/fcb8cf56419bba7f9ddaa3ad2d030cdf4dc777ce))
* remove [@main](https://github.com/main) in raccoon-test ([7fca491](https://github.com/Chinlinlee/raccoon-dicom/commit/7fca49104b15774fa723b92aee8440cd3688510a))
* remove test ([8b22238](https://github.com/Chinlinlee/raccoon-dicom/commit/8b2223883500408f3b5b55a5a156be7775a9ede1))
* rename token to repo_token ([2b480a1](https://github.com/Chinlinlee/raccoon-dicom/commit/2b480a11b90bdd248390829b016d0d7305272e67))
* specific test to main branch ([b0054e2](https://github.com/Chinlinlee/raccoon-dicom/commit/b0054e27c373c5412dceebdf371c8d46f28cc86e))
* update .env.template ([7ed9be7](https://github.com/Chinlinlee/raccoon-dicom/commit/7ed9be713f52de283c70badc8b614e04ba6eeb2f))
* update .env.template ([5bf6936](https://github.com/Chinlinlee/raccoon-dicom/commit/5bf69365bb77e136cea4431afd4fe68064959baf))
* update .env.template ([c65f99c](https://github.com/Chinlinlee/raccoon-dicom/commit/c65f99cfd7faa590f8ab40f61fe739d224e48df0))
* update `Dockerfile` and add docker-compose ([a936d00](https://github.com/Chinlinlee/raccoon-dicom/commit/a936d0010e0e4b9dd98b82862b279e286a85e310))
* use PAT instead of GITHUB_TOKEN ([58cef54](https://github.com/Chinlinlee/raccoon-dicom/commit/58cef54d20f3572531eb871d9e7f3bbd4af10fbe))
